$schema: https://azuremlschemas.azureedge.net/latest/commandJob.schema.json

experiment_name: pytorch_mnist

code: ./src

command: |
  sleep 10
  ray status
  python train.py

environment: azureml:ray-torch@latest

compute: azureml:compute-gpu

resources:
  instance_count: 2

environment_variables:
  AZUREML_COMPUTE_USE_COMMON_RUNTIME: "true"
  _AZUREML_CR_START_RAY: "true"
  AZUREML_COMMON_RUNTIME_USE_INTERACTIVE_CAPABILITY: "True"

# distribution:
#     type: ray

services:
  my_vs_code:
    job_service_type: VSCode
  my_jupyter_lab:
    job_service_type: JupyterLab
  my_ssh:
    job_service_type: SSH
    properties:
      sshPublicKeys: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC/RnXnL6pM6bQsHFxHMg//RO5RE1tlylY/mc9V6va94Yjb/E2w5vbyg6XZ2+2Jk8cWVm6+Mf0pW0fzO/cdwWA5/FkZErF8vkwEeKl4AKXTWbCbbeLcLfZu1T2J5aJgvXGj/VssWwapYwFKaetA4Nza5u9WJsL1y7u8/9GrizzNX7+AfQMBBGJcYLKFi24I2uVqoIzFG5LXnu3OpR4Rasme02twqY0co9pjJFsHadhpl7EBbQMxvYdCSFbvcoBZanfiGb/lyfuav6Ne1ivYRT6t9iTtyvfUM/pKwQlHN3nx3ioAs8elhamp0e9XnVOyG1REdo4oLuY318uR3OQ9fJh5iRZdYxGdWsSMukFkAzuecE5a+wtGS6eXFIQPaQXGgdkiDj4/v4evpz5uTJwWeM3kvJ56XcDJ+TQ/9fCnVthyMDgKV5WYvS30vcslI6aV1AIoWxtvw9kzj/7wqTiD0l2o3PlQ7ZTkGuh1KZE2Xvi55/8km7Q6KzmhWmMSZEG3mE6OemsGqNPHpYvkoi8dc6EG3bwAFEKPVkK9NGnR8mcEfpLL6oGQrDvlHexoUUkvZZDocQp0Ip8aeuoaJSDeS10SmmB4NlztSjiwTMSn6+uXpxjz5cbNCG6xwITtKx7BndBXhI/C0Z6U5n6VWRUNi/AXSHX9pn5LZSBOAakKvs/SbQ== chnld@daweil-home